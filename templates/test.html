<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='font.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='body.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='btn.css') }}">
    <link rel="stylesheet" href="..\static\btn.css">
    <link rel="stylesheet" href="..\static\font.css">
    <link rel="stylesheet" href="..\static\body.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">




    <title>主頁面</title>
    <style>
        .content {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 90vh;
            margin: 0;
        }

        .box {
            background-color: blueviolet;
            height: 80%;
            width: 60%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .page {
            display: none;
        }

        .active {
            display: block;
        }

        .image-container {
            text-align: center;
        }

        .question-options {
            padding: 15px 0;
        }
    </style>
</head>

<body>
    <div class="navbar">
        <a href="#">聊心室</a>
        <a href="#">測驗</a>
        <a href="#">尋找資源</a>
        <a href="#" class="home-icon"><img src="\static\home.png" alt="Home Icon"></a>
    </div>
    <!-- banner -->

    <!-- 內容 -->
    <div class="content">
        <div class="box">
            <!-- 問答部分開始 -->
            <div id="page1" class="page active">
                <h2>封面</h2>
                <button onclick="startQuiz()">開始測驗</button>
            </div>
            <!-- 第一題 -->
            <div id="page2" class="page">
                <div class="image-container">
                    <h1>第一</h1>
                    <img src="\static\image2.jpg" alt="Image 2">
                </div>
                <div class="question-options">
                    <!-- radio 選項 -->
                    <input type="radio" name="q1" id="q1o1" value="1">
                    <label for="q1o1">Option 1</label><br>

                    <input type="radio" name="q1" id="q1o2" value="2">
                    <label for="q1o2">Option 2</label><br>

                    <input type="radio" name="q1" id="q1o3" value="3">
                    <label for="q1o3">Option 3</label><br>

                    <input type="radio" name="q1" id="q1o4" value="4">
                    <label for="q1o4">Option 4</label><br>

                    <input type="radio" name="q1" id="q1o5" value="5">
                    <label for="q1o5">Option 5</label><br>
                </div>

                <button onclick="changePage('next', 2)">下一議題</button>

            </div>
            <!-- 第二題 -->
            <div id="page3" class="page">
                <div class="image-container">
                    <h1>第二</h1>
                    <img src="\static\image2.jpg" alt="Image 2">
                </div>
                <div class="question-options">
                    <!-- radio 選項 -->
                    <input type="radio" name="q2" id="q2o1" value="1">
                    <label for="q2o1">Option 1</label><br>

                    <input type="radio" name="q2" id="q2o2" value="2">
                    <label for="q2o2">Option 2</label><br>

                    <input type="radio" name="q2" id="q2o3" value="3">
                    <label for="q2o3">Option 3</label><br>

                    <input type="radio" name="q2" id="q2o4" value="4">
                    <label for="q2o4">Option 4</label><br>

                    <input type="radio" name="q2" id="q2o5" value="5">
                    <label for="q2o5">Option 5</label><br>
                </div>

                <button onclick="changePage('prev', 3)">上一議題</button>
                <button onclick="changePage('next', 3)">下一議題</button>
            </div>
            <!-- 第三題 -->
            <div id="page4" class="page">
                <div class="image-container">
                    <h1>第三</h1>
                    <img src="\static\image2.jpg" alt="Image 3">
                </div>
                <div class="question-options">
                    <!-- radio 選項 -->
                    <input type="radio" name="q3" id="q3o1" value="1">
                    <label for="q3o1">Option 1</label><br>

                    <input type="radio" name="q3" id="q3o2" value="2">
                    <label for="q3o2">Option 2</label><br>

                    <input type="radio" name="q3" id="q3o3" value="3">
                    <label for="q3o3">Option 3</label><br>

                    <input type="radio" name="q3" id="q3o4" value="4">
                    <label for="q3o4">Option 4</label><br>

                    <input type="radio" name="q3" id="q3o5" value="5">
                    <label for="q3o5">Option 5</label><br>
                </div>

                <button onclick="changePage('prev', 4)">上一議題</button>
                <button onclick="changePage('next', 4)">下一議題</button>
            </div>
            <!-- 第四題 -->
            <div id="page5" class="page">
                <div class="image-container">
                    <h1>第四</h1>
                    <img src="\static\image2.jpg" alt="Image 4">
                </div>
                <div class="question-options">
                    <!-- radio 選項 -->
                    <input type="radio" name="q4" id="q4o1" value="1">
                    <label for="q4o1">Option 1</label><br>

                    <input type="radio" name="q4" id="q4o2" value="2">
                    <label for="q4o2">Option 2</label><br>

                    <input type="radio" name="q4" id="q4o3" value="3">
                    <label for="q4o3">Option 3</label><br>

                    <input type="radio" name="q4" id="q4o4" value="4">
                    <label for="q4o4">Option 4</label><br>

                    <input type="radio" name="q4" id="q4o5" value="5">
                    <label for="q4o5">Option 5</label><br>
                </div>

                <button onclick="changePage('prev', 5)">上一議題</button>
                <button onclick="changePage('next', 5)">下一議題</button>
            </div>
            <!-- 第五題 -->
            <div id="page6" class="page">
                <div class="image-container">
                    <h1>第五</h1>
                    <img src="\static\image2.jpg" alt="Image 5">
                </div>
                <div class="question-options">
                    <!-- radio 選項 -->
                    <input type="radio" name="q5" id="q5o1" value="1">
                    <label for="q5o1">Option 1</label><br>

                    <input type="radio" name="q5" id="q5o2" value="2">
                    <label for="q5o2">Option 2</label><br>

                    <input type="radio" name="q5" id="q5o3" value="3">
                    <label for="q5o3">Option 3</label><br>

                    <input type="radio" name="q5" id="q5o4" value="4">
                    <label for="q5o4">Option 4</label><br>

                    <input type="radio" name="q5" id="q5o5" value="5">
                    <label for="q5o5">Option 5</label><br>
                </div>

                <button onclick="changePage('prev', 6)">上一議題</button>
                <button onclick="changePage('next', 6); submitAnswers()">確定送出</button>
            </div>


            <div id="page7" class="page">
                <div class="score-display">
                    <h2>Your Score: <span id="score">0</span></h2>
                </div>
                <button onclick="submitChat()">前往療心室</button>

            </div>

            <!-- 問答部分結束 -->
        </div>
    </div>

    <h5>@pull.me.up2023</h5>
    <script>
        
        let totalScore = 0;
        function startQuiz() {
            document.getElementById('page1').classList.remove('active');
            document.getElementById('page2').classList.add('active');
        }

        function changePage(direction, currentPage) {
            let nextPage;
            if (direction === 'next') {
                nextPage = currentPage + 1;
            } else {
                nextPage = currentPage - 1;
            }

            document.getElementById('page' + currentPage).classList.remove('active');
            document.getElementById('page' + nextPage).classList.add('active');
        }

        function checkAllAnswered() {
            for (let i = 1; i <= 5; i++) {
                if (!document.querySelector(`input[name="q${i}"]:checked`)) {
                    return false;
                }
            }
            return true;
        }

        function calculateScore() {
            let score = 0;
            for (let i = 1; i <= 5; i++) {
                const selectedOption = document.querySelector(`input[name="q${i}"]:checked`);
                if (selectedOption) {
                    score += parseInt(selectedOption.value);
                }
            }
            sendScoreToChat(score);
            return score;

        }
        function sendScoreToChat(score) {
            window.location.href = `chat.html?score=${score}`;
        }

        function submitAnswers() {
            let totalScore = 0;

            // loop through all questions and get selected answers' values
            for (let i = 1; i <= 5; i++) {
                let selectedOption = document.querySelector(`input[name="q${i}"]:checked`);
                if (selectedOption) {
                    totalScore += parseInt(selectedOption.value, 10);
                }
            }
            document.getElementById('score').innerText = totalScore;
            // Redirect to chat.html with the score as a query parameter

        }

        function submitChat() {
            console.log("totalScore:", totalScore);
            window.location.href = `chat.html?score=${totalScore}`;
        }



    </script>
</body>

</html>